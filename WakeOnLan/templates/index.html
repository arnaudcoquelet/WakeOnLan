{% extends "bootstrap/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/fixes.html" as fixes %}
{% import "bootstrap/utils.html" as util %}

{% block content %}
{{util.flashed_messages(dismissible=True)}}
<div class="container">
  <h1>Devices</h1>
  </br>
    <ul class="list-group">

    {% for device in devices %}
        <li style="list-style: none;">
            {% if device["status"] == 'UP' %}
                {% set panelstyle = 'panel-info' %}
            {% elif device["status"] == 'DOWN' %}
                {% set panelstyle = 'panel-danger' %}
            {% else %}
                {% set panelstyle = 'panel-default' %}
            {% endif %}

        <div class="panel {{ panelstyle }}">
            
            <div class="panel-heading" data-toggle="collapse" href="#panel-{{ device['id'] }}">
                <b> {{ device["name"] }} </b>
            </div>
            

            <div id="panel-{{ device['id'] }}" class="panel-collapse collapse">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-8 col-xs-8">
                            <div>IP: {{ device["ip"] }} </div>
                            <div>MAC: {{ device["mac"] }} </div>
                        </div>
                        <div  class="col-sm-4 col-xs-4 right">
                            <a href="/pingDevice/{{ device["id"]}}" type="button" class="btn btn-info pull-right" value="{{ device['mac'] }}">Check</a>
                        </div>
                    </div>
                    </br>
                    <div>
                        
                        <a href="/wolDevice/{{ device["id"]}}" type="button" class="btn btn-primary btn-block" value="{{ device['mac'] }}">WakeOnLine</a>
                    </div>
                </div>
            </div>
        </div>
        </li>
    {% endfor %}
    </ul>

</div>

<script type="text/javascript" defer>
    window.onload = function(e){ 
    $("div.container.flashed-messages").show().delay(3000).fadeOut(400);

    }
</script>
    
{% endblock %}

{% block head %}
{{super()}}
{{fixes.ie8()}}
{% endblock %}


